(this["webpackJsonpitunes-client"]=this["webpackJsonpitunes-client"]||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/shopping-cart.2f79694d.svg"},116:function(e,t,a){e.exports=a(134)},121:function(e,t,a){},122:function(e,t,a){},127:function(e,t,a){},131:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),i=(a(121),a(122),a(16)),o=a(32),s=a(15),u=a(214),m=a(212),d=a(48),E=a(185),p=a(92),f=a.n(p),v=a(191),g=a(213),b=function(e){return function(t){var a="https://itunes.apple.com/search?term="+"".concat(e.song);return void 0!==e.limit&&(a+="&limit=".concat(e.limit)),void 0!==e.entity&&(a+="&entity=".concat(e.entity)),fetch(a).then((function(e){return e.json()})).then((function(e){return t({type:"GET_SONGS_LIST",payload:e.results})}))}},h=function(e){return function(t){t({type:"UPDATE_SETTINGS",payload:e})}},O=a(17),y=(a(127),Object(E.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},cartButton:{width:"70px",maxWidth:500,height:"70px"}}})));var I=Object(O.b)(null,(function(e,t){return{addItemToCart:function(t){return e((a=t,function(e){e({type:"ADD_ITEM_TO_CART",payload:a})}));var a}}}))((function(e){var t=e.location.state.Itune,a=y(),n=r.a.useState(!1),c=Object(i.a)(n,2),l=c[0],o=c[1],s=new Date(t.releaseDate).toLocaleDateString(),E=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement("div",{className:"ituneDetails"},r.a.createElement("div",{className:"songHeader"},r.a.createElement("span",null,r.a.createElement("img",{src:t.artworkUrl100,alt:""})),r.a.createElement("span",null,"  ",r.a.createElement(d.a,{variant:"h2",gutterBottom:!0},t.trackName))),r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Artist: ",t.artistName),t.collectionName&&r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Album: ",t.collectionName),r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Release Date:  ",s),r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Album Price: ",t.collectionPrice,"$"),r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Itune Price ",t.trackPrice,"$"),r.a.createElement(g.a,{title:"add to shopping cart"},r.a.createElement(v.a,{onClick:function(){e.addItemToCart(t),o(!0)},color:"primary"},r.a.createElement(f.a,{className:a.cartButton}))),r.a.createElement(u.a,{open:l,autoHideDuration:6e3,onClose:E},r.a.createElement(m.a,{onClose:E,severity:"success"},"Item has been added to cart !"))),r.a.createElement("div",{className:"player"},".m4a"===t.previewUrl.substring(t.previewUrl.length-4,t.previewUrl.length)?r.a.createElement("audio",{className:"audioPlayer",controls:!0},r.a.createElement("source",{src:t.previewUrl,type:"audio/ogg"})):r.a.createElement("video",{className:"audioPlayer",controls:!0},r.a.createElement("source",{src:t.previewUrl,type:"video/ogg"}))))})),S=a(61),k=a(211),C=a(94),N=a.n(C);a(57);var j=Object(O.b)((function(e){return{settings:e.settings||{limit:25}}}),(function(e,t){return{getSongs:function(t){return e(b(t))}}}))((function(e){var t=JSON.parse(localStorage.getItem("userItems")),a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2),d=u[0],E=u[1];function p(){""!==l.trim()?(e.getSongs({song:l,limit:e.settings.limit,entity:e.settings.entity}),e.onClick(),E(!1),function(e){t&&t.items&&null!=t||(t={items:[]});var a=t.items.find((function(t){return t.name===e})),n=t.items.indexOf(a);if(-1===n)10===t.items.length&&function(){var e,a,n=t.items[0].counter,r=Object(S.a)(t.items);try{for(r.s();!(a=r.n()).done;){var c=a.value;c.counter<=n&&(e=t.items.indexOf(c))}}catch(l){r.e(l)}finally{r.f()}t.items.splice(e,1)}(),t.items.push({name:e,counter:1}),localStorage.setItem("userItems",JSON.stringify(t));else{var r=t.items[n].counter;t.items.splice(n,1,{name:e,counter:r+1}),localStorage.setItem("userItems",JSON.stringify(t))}}(l)):E(!0)}return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(k.a,{id:"outlined-basic",label:"Artist Name",variant:"outlined",className:"searchField",onKeyPress:function(e){"Enter"===e.key&&p()},onChange:function(e){o(e.target.value)}}),r.a.createElement(v.a,{onClick:p},r.a.createElement(N.a,null)),d>0&&r.a.createElement("div",{className:"searchField"},r.a.createElement(m.a,{severity:"error"},"Pleas fill in artist name"))))})),w=a(95),T=a(96),_=a(106),x=a(104),B=a(193),R=a(194),D=a(197),A=a(196),U=a(195),P=r.a.createContext({}),M=P.Provider,F=(P.Consumer,P);var L=function(e){var t=Object(n.useContext)(F),a=e.song,c=Object(E.a)({root:{width:150,height:300}})();function l(){t.changeFlags(!0)}return r.a.createElement("div",{className:"ituneCard"},r.a.createElement(B.a,{className:c.root},r.a.createElement(R.a,null,r.a.createElement(o.b,{key:a.trackId,to:{pathname:"/ItunesClient/song/".concat(a.trackId),state:{Itune:a}},onClick:l},r.a.createElement(U.a,{component:"img",height:"140",image:a.artworkUrl100})),r.a.createElement(A.a,null,r.a.createElement(d.a,{gutterBottom:!0,variant:"h5",component:"h2"},r.a.createElement(o.b,{key:a.trackId,to:{pathname:"/ItunesClient/song/".concat(a.trackId),state:{Itune:a}},onClick:l},a.trackName)),r.a.createElement(d.a,{variant:"body2",color:"textSecondary",component:"p"},a.artistName))),r.a.createElement(D.a,null)))},J=function(e){Object(_.a)(a,e);var t=Object(x.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.items!==e.items&&this.props.onListRefresh()}},{key:"componentWillMount",value:function(){this.context.changeFlags(!1)}},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"resultsView"},this.props.items.map((function(t){return r.a.createElement(L,{key:e.props.items.indexOf(t),song:t})})))}}]),a}(r.a.Component);J.contextType=F;var V=Object(O.b)((function(e){return{items:e.songsList||[]}}),null)(J),G=a(198);var W=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"searchArea"},r.a.createElement("div",{className:"searchItmes"},a?r.a.createElement("span",{className:"spinner"},r.a.createElement(G.a,null)):r.a.createElement("span",{className:"spinner"}),r.a.createElement("span",null," ",r.a.createElement(j,{onClick:function(){c(!0)}})))),r.a.createElement("div",null,r.a.createElement(V,{onListRefresh:function(){c(!1)}})))},$=a(4),H=a(208),K=a(209),X=a(99),Q=a.n(X),q=a(207),z=a(199),Y=a(200),Z=a(204),ee=a(202),te=a(203),ae=a(201);var ne=Object(O.b)(null,(function(e,t){return{createUser:function(t){return e(function(e){return function(t){return fetch("/api/users/"+e).then((function(e){return t({type:"CREATE_USER",payload:e})}))}}(t))}}}))((function(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1],E=Object(n.useState)(!1),p=Object(i.a)(E,2),f=p[0],v=p[1],g=function(){l(!1)};return r.a.createElement("div",null,r.a.createElement(z.a,{variant:"outlined",color:"inherit",onClick:function(){v(!1),l(!0)}},"Login"),r.a.createElement(Y.a,{open:c,onClose:g,"aria-labelledby":"form-dialog-title"},r.a.createElement(ae.a,{id:"form-dialog-title"},"Subscribe"),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,"To enjoy better user experience from this website, please enter a user name here."),r.a.createElement(k.a,{autoFocus:!0,margin:"dense",id:"name",label:"User Name",type:"email",fullWidth:!0,onChange:function(e){d(e.target.value)}}),f>0&&r.a.createElement("div",null,r.a.createElement(m.a,{severity:"error"},"Pleas fill in user name"))),r.a.createElement(Z.a,null,r.a.createElement(z.a,{onClick:g,color:"primary"},"Cancel"),r.a.createElement(z.a,{onClick:function(){""!==u.trim()?(e.createUser(u),v(!1),l(!1)):v(!0)},color:"primary"},"Subscribe"))))})),re=a(72),ce=a.n(re),le=a(54),ie=a(73),oe=a(97),se=a(3),ue=a(215),me=a(192),de=a(136),Ee=a(205),pe=Object(E.a)({list:{width:250},fullList:{width:"auto"}});var fe=Object(O.b)(null,(function(e,t){return{getSongs:function(t){return e(b({song:t}))}}}))((function(e){var t=Object(n.useContext)(F),a=pe(),c=r.a.useState({left:!1}),l=Object(i.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),d=m[0],E=m[1];function p(){return(p=Object(oe.a)(ce.a.mark((function t(a){return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(a),e.getSongs(a);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){""!==d.trim()&&e.getSongs(d)}),[d]);var f,v=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&s(Object(ie.a)(Object(ie.a)({},o),{},Object(le.a)({},e,t)))}};return r.a.createElement("div",null,r.a.createElement(z.a,{disabled:t.data.disableUserSearchesButton,color:"inherit",onClick:v("left",!0)},"My Searches"),r.a.createElement(ue.a,{anchor:"left",open:o.left,onClose:v("left",!1)},(f="left",r.a.createElement("div",{className:Object(se.a)(a.list,Object(le.a)({},a.fullList,"top"===f||"bottom"===f)),role:"presentation",onClick:v(f,!1),onKeyDown:v(f,!1)},void 0!==JSON.parse(localStorage.getItem("userItems"))&&null!==JSON.parse(localStorage.getItem("userItems"))&&r.a.createElement("div",null,r.a.createElement(me.a,null,JSON.parse(localStorage.getItem("userItems")).items.map((function(e){return r.a.createElement(de.a,{button:!0,key:e.name,onClick:function(){return function(e){return p.apply(this,arguments)}(e.name)}},r.a.createElement(Ee.a,{primary:e.name}))}))))))))})),ve=a(138),ge=a(135),be=a(108),he=a(98),Oe=a.n(he),ye=a(216),Ie=Object(E.a)({root:{width:300}});var Se=Object(O.b)(null,(function(e,t){return{updateSettings:function(t){return e(h(t))}}}))((function(e){var t=Ie();return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{id:"discrete-slider",gutterBottom:!0},"Results limit"),r.a.createElement(ye.a,{defaultValue:30,getAriaValueText:function(t){return e.updateSettings(["limit",t]),t},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:10,marks:!0,min:1,max:50}))})),ke=a(206),Ce=a(105),Ne={movie:["movieArtist","movie"],music:["musicArtist","musicTrack","album","musicVideo","mix","song"],podcast:["podcastAuthor","podcast"],limit:[]},je=Object(E.a)((function(e){return{root:{backgroundColor:e.palette.background.paper}}}));var we=Object(O.b)(null,(function(e,t){return{updateSettings:function(t){return e(h(t))}}}))((function(e){var t=je(),a=r.a.useState(null),n=Object(i.a)(a,2),c=n[0],l=n[1],o=r.a.useState(1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Ne[e.label]||[];return r.a.createElement("div",{className:t.root},r.a.createElement(me.a,{component:"nav","aria-label":"Device settings"},r.a.createElement(de.a,{button:!0,"aria-haspopup":"true","aria-controls":"lock-menu","aria-label":"when device is locked",onClick:function(e){l(e.currentTarget)}},r.a.createElement(Ee.a,{primary:e.label,secondary:d[u]}))),r.a.createElement(Ce.a,{id:"lock-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:function(){l(null)}},d.map((function(t,a){return r.a.createElement(ke.a,{key:t,selected:a===u,onClick:function(t){return function(t,a){m(a),e.updateSettings([e.label,d[a]]),l(null)}(0,a)}},t)}))))})),Te=Object(E.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},menuButton:{marginRight:e.spacing(2)},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function _e(){var e=Te(),t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(v.a,{edge:"start",onClick:function(){c(!0)},className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(Oe.a,null)),r.a.createElement(ve.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:n,onClose:function(){c(!1)},closeAfterTransition:!0,BackdropComponent:ge.a,BackdropProps:{timeout:500}},r.a.createElement(be.a,{in:n},r.a.createElement("div",{className:e.paper},r.a.createElement(d.a,{variant:"h5",gutterBottom:!0},"Search Settings:"),r.a.createElement(Se,null),r.a.createElement(we,{label:"movie"}),r.a.createElement(we,{label:"music"}),r.a.createElement(we,{label:"podcast"})))))}a(131);var xe=Object(E.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},cartButton:{color:"white"}}})),Be=Object($.a)((function(e){return{badge:{right:-3,top:13,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",color:"lightgrey"}}}))(q.a);var Re=Object(O.b)((function(e){return{cart:e.cart||{items:[]}}}),null)((function(e){var t=xe(),a=Object(n.useContext)(F);return r.a.createElement("div",{className:t.root},r.a.createElement(H.a,{position:"static"},r.a.createElement(K.a,null,r.a.createElement(_e,null),r.a.createElement("div",{className:t.title},r.a.createElement(o.b,{className:"homeLink",to:{pathname:"/ItunesClient"},onClick:function(){a.changeFlags(!1)}},r.a.createElement(d.a,{variant:"h6"},"ITunes search engine"))),r.a.createElement(o.b,{to:{pathname:"/ItunesClient/cart"},onClick:function(){a.changeFlags(!0)}},r.a.createElement(v.a,{"aria-label":"cart"},r.a.createElement(Be,{badgeContent:e.cart.items.length},r.a.createElement(Q.a,{className:t.cartButton})))),r.a.createElement(fe,null),r.a.createElement(ne,null))))})),De=a(210);a(86);var Ae=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"carItemDetailsWrapper"},r.a.createElement("span",null,r.a.createElement("img",{src:e.cartItem[0].artworkUrl100,alt:""})),r.a.createElement("span",{className:"cartItemDetail"},e.cartItem[0].trackName),r.a.createElement("span",{className:"cartItemDetail"},"Quantity: ",e.cartItem.length),r.a.createElement("span",{className:"cartItemDetail"},"Price: ",e.cartItem[0].trackPrice,"$"),r.a.createElement("span",{className:"cartItemDetail"}," Total Price: ",e.cartItem[0].trackPrice*e.cartItem.length,"$")),r.a.createElement(De.a,{variant:"middle"}))},Ue=a(100),Pe=a.n(Ue),Me=a(101),Fe=a.n(Me),Le=a(102),Je=a.n(Le),Ve=a(132);var Ge=Object(O.b)((function(e){return{items:e.cart.items||[]}}),(function(e,t){return{removeItemFromCart:function(t){return e((a=t,function(e){e({type:"REMOVE_ITEM_FROM_CART",payload:a})}));var a},removeItuneFromCart:function(t){return e((a=t,function(e){e({type:"REMOVE_ITUNE_FROM_CART",payload:a})}));var a}}}))((function(e){var t=Ve.groupBy(e.items,"trackId")||{},a=Object.values(t);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"cartImageWrapper"},r.a.createElement("img",{className:"cartImage",src:Pe.a,alt:""}),r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"My Cart")),r.a.createElement("div",null,r.a.createElement("ul",null,a.map((function(t){return r.a.createElement("div",{className:"cartItemWrapper",key:a.indexOf(t)},r.a.createElement("span",{className:"cartItemSpan"},r.a.createElement(Ae,{cartItem:t})),r.a.createElement("span",null,r.a.createElement("div",{className:"minusButton"},r.a.createElement(g.a,{title:"Remove one item of this product"},r.a.createElement(z.a,{onClick:function(){return function(t){e.removeItemFromCart({cartItem:t[0].trackId})}(t)}},r.a.createElement(Fe.a,null)))),r.a.createElement("div",null,r.a.createElement(g.a,{title:"Remove all items for this product"},r.a.createElement(z.a,{onClick:function(){return function(t){e.removeItuneFromCart({cartItem:t[0].trackId})}(t)}},r.a.createElement(Je.a,null))))))})))),r.a.createElement("div",null,r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Total amount: ",function(e){var t,a=0,n=Object(S.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a+=r[0].trackPrice*r.length}}catch(c){n.e(c)}finally{n.f()}return Math.round(100*(a+Number.EPSILON))/100}(a),"$"))))}));var We=function(){var e=Object(n.useState)({disableUserSearchesButton:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1],l={data:a,changeFlags:function(e){return c({disableUserSearchesButton:e})}};return r.a.createElement(o.a,null," ",r.a.createElement("div",null,r.a.createElement(M,{value:l},r.a.createElement(Re,null)),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/ItunesClient"}," ",r.a.createElement(M,{value:l},r.a.createElement(W,null)),"\ufffc"),r.a.createElement(s.a,{exact:!0,path:"/ItunesClient"}," ",r.a.createElement(M,{value:l},r.a.createElement(W,null)),"\ufffc"),r.a.createElement(s.a,{path:"/ItunesClient/song",component:I}),r.a.createElement(s.a,{path:"/ItunesClient/cart",component:Ge})))," ")};var $e=function(){return r.a.createElement("div",null,r.a.createElement(We,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=a(30),Ke={songs:[],user:"",cart:localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):{items:[]},settings:{limit:25,entity:void 0}};var Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.songs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SONGS_LIST":return t.payload;default:return e}};var Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.user,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":return t.payload;default:return e}},qe=a(64);var ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.cart,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM_TO_CART":return e.items.push(t.payload),localStorage.setItem("cart",JSON.stringify(e)),{items:Object(qe.a)(e.items)};case"REMOVE_ITEM_FROM_CART":var a=e.items.find((function(e){return e.trackId===t.payload.cartItem})),n=e.items.indexOf(a);return e.items.splice(n,1),localStorage.setItem("cart",JSON.stringify(e)),{items:Object(qe.a)(e.items)};case"REMOVE_ITUNE_FROM_CART":return e.items=e.items.filter((function(e){return e.trackId!==t.payload.cartItem})),localStorage.setItem("cart",JSON.stringify(e)),{items:Object(qe.a)(e.items)};default:return e}};var Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke.settings,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SETTINGS":return e[t.payload[0]]=t.payload[1],e;default:return e}},Ze=Object(He.c)({songsList:Xe,usersReducer:Qe,cart:ze,settings:Ye}),et=[a(103).a],tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||He.d,at=Object(He.e)(Ze,tt(He.a.apply(void 0,et)));l.a.render(r.a.createElement(O.a,{store:at},r.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){},86:function(e,t,a){}},[[116,1,2]]]);
//# sourceMappingURL=main.dd02137c.chunk.js.map